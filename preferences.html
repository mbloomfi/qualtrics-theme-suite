<!DOCTYPE html>
<html class="white">

<head>
	<meta name="QTS Preferences" charset="UTF-8">
	<title>QTS Preferences</title>

	<style>
		@font-face {
		  font-family: 'Source Sans Pro';
		  font-style: normal;
		  font-weight: 400;
		  src: url("local/fonts/SourceSansPro-Regular.otf");
		}
		@font-face {
		  font-family: 'Source Sans Pro';
		  font-style: italic;
		  font-weight: 400;
		  src: url("local/fonts/SourceSansPro-It.otf");
		}
		@font-face {
		  font-family: 'Source Sans Pro';
		  font-style: normal;
		  font-weight: 600;
		  src: url("local/fonts/SourceSansPro-Bold.otf");
		}
		@font-face {
		  font-family: 'Source Sans Pro';
		  font-style: italic;
		  font-weight: 600;
		  src: url("local/fonts/SourceSansPro-BoldIt.otf");
		}
		html,
		section,
		body,
		p,
		h1,
		h2,
		div,
		span,
		input,
		textarea,
		label,
		a,
		button,
		select {
		  padding: 0;
		  margin: 0;
		  border: none;
		  border-radius: 0;
		  outline: none;
		  font-size: 100%;
		  text-decoration: none;
		  color: #464646;
		  text-decoration: none;
		  font-weight: normal;
		  font-family: "Source Sans Pro", "Helvetica Neue";
		}
		html,
		body {
		  width: 100%;
		  height: 100%;
		  position: relative;
		  overflow: hidden;
		  background-color: #ebebeb;
		  -webkit-user-select: none;
		  -webkit-app-region: no-drag;
		  -webkit-transition: background-color 0.3s ease;
		          transition: background-color 0.3s ease;
		}
		html.white,
		body.white {
		  background-color: #fff;
		}
		img.logo {
		  height: 80px;
		  position: absolute;
		  top: 0;
		  right: 0;
		  z-index: 100;
		  padding: 0 30px 5px 0;
		  -webkit-app-region: drag;
		  cursor: default;
		  -webkit-filter: saturate(0) opacity(0.14);
		          filter: saturate(0) opacity(0.14);
		  -webkit-transition: top 0.3s ease, -webkit-filter 0.3s ease;
		          transition: top 0.3s ease, -webkit-filter 0.3s ease;
		}
		img.logo:hover {
		  -webkit-filter: saturate(0) opacity(0.25);
		          filter: saturate(0) opacity(0.25);
		  cursor: -webkit-grab;
		  cursor: grab;
		}
		img.logo.hide {
		  top: -100px;
		}
		#bottom-bar {
		  height: 30px;
		  width: 100%;
		  position: absolute;
		  bottom: 0;
		  left: 0;
		  box-sizing: border-box;
		  text-align: center;
		  line-height: 30px;
		  -webkit-transition: bottom 0.3s ease;
		          transition: bottom 0.3s ease;
		}
		#bottom-bar div.btn {
		  -webkit-app-region: no-drag;
		  height: 100%;
		  width: 50%;
		  position: absolute;
		  top: 0;
		  color: #fff;
		  text-transform: uppercase;
		  cursor: pointer;
		  box-sizing: border-box;
		  -webkit-transition: background-color 0.25s ease;
		          transition: background-color 0.25s ease;
		}
		#bottom-bar div.btn:first-child {
		  left: 0;
		  background-color: #df4848;
		  border-right: 1px solid #5f5f5f;
		}
		#bottom-bar div.btn:first-child:hover {
		  background-color: #f55550;
		}
		#bottom-bar div.btn:last-child {
		  right: 0;
		  background-color: #28b432;
		}
		#bottom-bar div.btn:last-child:hover {
		  background-color: #32c837;
		}
		#bottom-bar.hide {
		  bottom: -60px;
		}
		#preferences-wrapper {
		  height: 500px;
		  width: 100%;
		  position: relative;
		  top: 0;
		}
		nav#nav {
		  height: 100%;
		  width: 25%;
		  position: absolute;
		  top: 0;
		  left: 0;
		  -webkit-transition: left 0.3s ease;
		          transition: left 0.3s ease;
		}
		nav#nav div.nav_option {
		  position: relative;
		  -webkit-app-region: no-drag;
		  height: 100px;
		  box-sizing: border-box;
		  background: #3c3c3c;
		  color: #fff;
		  width: 100%;
		  line-height: 100px;
		  padding: 0 0 0 20px;
		  font-size: 32px;
		  text-transform: uppercase;
		  cursor: pointer;
		  z-index: 10;
		  -webkit-transition: width 0.25s ease, background 0.25s ease, color 0.25s ease;
		          transition: width 0.25s ease, background 0.25s ease, color 0.25s ease;
		}
		nav#nav div.nav_option:hover {
		  background: #5a5a5a;
		}
		nav#nav div.nav_option.current {
		  width: 107%;
		  background-color: #787878;
		}
		nav#nav.hide {
		  left: -300px;
		}
		section#panel {
		  position: absolute;
		  top: 0;
		  right: 0;
		  height: 100%;
		  width: 75%;
		  opacity: 1;
		  font-size: 1.75em;
		  -webkit-transition: opacity 0.3s ease;
		          transition: opacity 0.3s ease;
		}
		section#panel div#preferences_splash {
		  height: 100%;
		  line-height: 500px;
		  font-size: 2em;
		  text-align: center;
		  color: #c8c8c8;
		}
		section#panel form {
		  position: relative;
		  z-index: 10;
		  width: 70%;
		  left: 10%;
		  top: 10%;
		  -webkit-app-region: no-drag;
		}
		section#panel form label {
		  display: block;
		}
		section#panel form label:after {
		  content: "";
		  display: block;
		  clear: both;
		}
		section#panel form h2 {
		  margin: 0 0 5px;
		}
		section#panel form div.fieldSet {
		  width: 100%;
		  margin: 0 0 15px 0;
		}
		section#panel form div.fieldSet:after {
		  content: "";
		  display: block;
		  clear: both;
		}
		section#panel form input {
		  font-size: 21px;
		  padding: 3px 0;
		  display: block;
		  min-width: 90%;
		  outline: 2px solid #d7d7d7;
		  margin: 0 0 15px;
		  text-indent: 2px;
		  border: none;
		  -webkit-transition: outline 0.25s ease;
		          transition: outline 0.25s ease;
		}
		section#panel form input:focus {
		  outline-offset: 0;
		  outline: 2px solid #bebebe;
		}
		section#panel form input.thumbnailName {
		  width: 40%;
		  display: inline-block;
		  min-width: 50%;
		  margin: 0 10px 0 0;
		  float: left;
		}
		section#panel form label.radioLabel {
		  display: block;
		  line-height: 1;
		  padding: 0;
		  margin: 0 0 5px;
		  font-size: 18px;
		}
		section#panel form label.radioLabel input {
		  padding: 0;
		  display: inline-block;
		  margin: 0 0 0 10px;
		  background: transparent;
		  outline: none;
		  height: 15px;
		  width: 15px;
		}
		section#panel form label.radioLabel span {
		  font-size: 14px;
		}
		section#panel form button {
		  font-size: 16px;
		  background-color: #6e6e6e;
		  color: #fff;
		  padding: 5px 10px;
		  cursor: pointer;
		  display: block;
		}
		section#panel form button:hover {
		  background-color: #5a5a5a;
		}
		section#panel form div.select_cont {
		  width: 90%;
		  background-color: #fff;
		  outline: 2px solid #d7d7d7;
		}
		section#panel form div.select_cont select {
		  display: block;
		  font-size: 18px;
		  height: 30px;
		  width: 100%;
		  margin: 0 0 20px;
		  text-indent: 2px;
		  background-color: #fff;
		  background: transparent;
		}
		section#panel form div.select_cont.inline-block {
		  width: 25%;
		  float: left;
		  height: 33px;
		  display: inline-block;
		}
		section#panel form div.select_cont.inline-block select {
		  display: block;
		  font-size: 18px;
		  height: auto;
		  width: 100%;
		  margin: 0;
		  text-indent: 2px;
		  background: transparent;
		}
		section#panel form#preferences_form {
		  padding: 50px 0 0 0;
		}
		section#panel form label#path-to-brands-label span#homeDirectory {
		  font-size: 14px;
		  color: #787878;
		  text-style: italic;
		  display: inline-block;
		  margin: 0 5px 0 0;
		  height: 35px;
		  line-height: 35px;
		  float: left;
		}
		section#panel form label#path-to-brands-label input#path-to-brands {
		  float: left;
		  width: 50%;
		  min-width: 0;
		  display: inline-block;
		}
		section#panel.hide {
		  opacity: 0;
		}
		section#Prompter {
		  position: fixed;
		  top: -120px;
		  left: 0;
		  background: #242424;
		  color: #fff;
		  height: 60px;
		  width: 100%;
		  border-bottom: 4px solid #df4848;
		  box-shadow: 0 10px 35px rgba(0,0,0,0.5);
		  z-index: 10;
		  -webkit-transition: top 0.5s ease;
		          transition: top 0.5s ease;
		}
		section#Prompter.show {
		  top: 0;
		  -webkit-transition: top 0.25s ease;
		          transition: top 0.25s ease;
		}
		section#Prompter .message {
		  color: inherit;
		  font-weight: bold;
		  height: 100%;
		  position: relative;
		  float: left;
		  line-height: 60px;
		  margin: 0 30px 0 30px;
		  font-size: 1.75em;
		}
		section#Prompter .btn {
		  color: inherit;
		  height: 48px;
		  position: relative;
		  top: 6px;
		  float: left;
		  line-height: 48px;
		  background: #ffa500;
		  padding: 0 15px;
		  font-size: 1.25em;
		  cursor: pointer;
		  text-align: center;
		  min-width: 50px;
		  background-color: rgba(255,255,255,0.15);
		  -webkit-transition: background-color 0.3s ease;
		          transition: background-color 0.3s ease;
		}
		section#Prompter .mainBtn {
		  background-color: rgba(223,72,72,0.85);
		}
		section#Prompter .mainBtn:hover {
		  background-color: #eb5454;
		}
		section#Prompter .btn2 {
		  margin: 0 20px 0 0;
		}
		section#Prompter .btn2:hover {
		  background-color: rgba(255,255,255,0.3);
		}
		div.overlay {
		  position: fixed;
		  top: 0;
		  left: 0;
		  height: 100%;
		  width: 100%;
		  background-color: rgba(0,0,0,0.3);
		  z-index: 9;
		  opacity: 0;
		  -webkit-transition: opacity 0.3s ease;
		          transition: opacity 0.3s ease;
		}
		div.overlay.visible {
		  opacity: 1;
		}
		

	</style>
		
</head>

<body class="white">

	<img id="logo" class="logo hide" src="local/images/qualtrics_logo.png">

	<section id="bottom-bar" class="hide">
		<div id="cancel" class="btn">cancel</div>
		<div id="save" class="btn">save</div>
	</section>

	<section id="preferences-wrapper">

		<nav id="nav" class="hide">
			<div id="QTS-option" class="nav_option">QTS</div>
			<div id="files-option" class="nav_option">Files</div>
			<div id="snippets-option" class="nav_option">Snippets</div>
			<div id="preview-option" class="nav_option">Preview</div>
			<div id="window-option" class="nav_option">Window</div>
		</nav>

		<section id="panel" class="hide">

			<div id="preferences_splash">PREFERENCES</div>

		</section>

	</section>

<script type="text/javascript">
	function checkAndRadio(){el(document.querySelectorAll("input[type=radio]"))}var remote=require("remote"),app=remote.require("app"),Global=remote.getGlobal("sharedObject"),appRoot=Global.appRoot,fs=require("fs"),json=require("jsonfile"),escape=require("escape-html"),currentPanel={},localUserPrefData={},logo=el("#logo"),panel=el("#panel"),navOptions=el(".nav_option");fs.stat("/Users/samueleaton/",function(e,a){console.log("stats.isDirectory:",a.isDirectory())}),json.readFile(Global.appRoot+"/local/user-settings.json",function(e,a){e&&console.log("ERROR reading user-settings.json::",e),console.log("read file:",a),localUserPrefData=a,setTimeout(function(){panel.rmClass("hide"),logo.rmClass("hide"),el("#nav").rmClass("hide"),el("html")[0].rmClass("white"),el("body")[0].rmClass("white"),el("#bottom-bar").rmClass("hide")},200)}),el("#cancel").on("click",function(){Global.preferencesWindow.close()}),el("#save").on("click",function(e){console.log("saving prefs"),json.writeFile(Global.appRoot+"/local/user-settings.json",localUserPrefData,function(e){e?alert("Error Saving Changes"):Global.preferencesWindow.close()})}),el("#QTS-option").on("click",function(){panel.transitionTo("QTS"),navOptions.rmClass("current"),this.addClass("current")}),el("#files-option").on("click",function(){panel.transitionTo("files"),navOptions.rmClass("current"),this.addClass("current")}),el("#snippets-option").on("click",function(){panel.transitionTo("snippets"),navOptions.rmClass("current"),this.addClass("current")}),el("#preview-option").on("click",function(){panel.transitionTo("preview"),navOptions.rmClass("current"),this.addClass("current")}),el("#window-option").on("click",function(){panel.transitionTo("window"),navOptions.rmClass("current"),this.addClass("current")}),panel.transitionTo=function(e){panel.addClass("hide");var a=panel.buildPanel(e);panel.insertData(e),setTimeout(function(){panel.setPanel(a),panel.rmClass("hide")},300)},panel.buildPanel=function(e){return"QTS"===e?currentPanel=el("+form#qtsForm").addClass("QTS").append(el("+label").text("QTS Thing").append(el("+input"))):"files"===e?(currentPanel=el("+form#filesForm").addClass("files"),currentPanel.append(el("+label#path-to-brands-label").append(el.join([el("+div").text("Path To Brands"),el("+span#homeDirectory").text(process.env.HOME+"/ "),el("+input#path-to-brands")]))),currentPanel.append(el("+label").text("Default Preview File").append(el("+div").addClass("select_cont").append(el("+select#default-preview-file").attr("name","default-preview-file")))),currentPanel.append(el("+button").text("Manage Preview Files")),currentPanel):"snippets"===e?currentPanel=el("+form#snippetsForm").addClass("snippets").append(el("+label").text("Snippets Stuff").append(el("+input"))):"preview"===e?currentPanel=el("+form#previewForm").addClass("preview").append(el.join([el("+div").addClass("fieldSet").append(el.join([el("+h2").text("Refresh Preview Window"),el("+label").addClass(["radioLabel"]).text("On Save").append(el("+span").text(" (⌘S) ")).text(" and Command ").append(el.join([el("+span").text(" (⌘R) "),el("+input#onSave").attr("type","radio").attr("value",1).attr("name","refreshPreview")])),el("+label").addClass("radioLabel").text("On Command Only").append(el.join([el("+span").text(" (⌘R) "),el("+input#onCommand").attr("type","radio").attr("value",2).attr("name","refreshPreview")]))])),el("+div").addClass("fieldSet").append(el.join([el("+h2").text("Default Thumbnail Name"),el("+input#thumbnailName").addClass("thumbnailName").attr("name","thumbnailName"),el("+div").addClass(["select_cont","inline-block"]).append(el("+select#default-thumbnail-ext"))]))])):"window"===e?currentPanel=el("+form#windowForm").addClass("window").append(el("+label").text("Window Thing").append(el("+input"))):void 0},panel.setPanel=function(e){panel.purge().append(e),checkAndRadio()},panel.insertData=function(e){if("QTS"===e);else if("files"===e){for(var a=(currentPanel.el("#path-to-brands").attr("value",localUserPrefData.files.pathToBrands),currentPanel.el("#default-preview-file")),l=[],n=0,t=localUserPrefData.files.previewFiles.length;t>n;n++){var r=localUserPrefData.files.previewFiles,i=el("+option").attr("value",r[n].fileName).text(r[n].verboseName);r[n].fileName===localUserPrefData.files.defaultPreviewFile&&(i.selected=!0),l.push(i)}a.append(el(l)),currentPanel.el("#path-to-brands").on("blur",function(){this.value!==localUserPrefData.files.pathToBrands&&(localUserPrefData.files.pathToBrands=this.value)}),currentPanel.el("#default-preview-file").on("blur",function(){this.options[this.selectedIndex].value!==localUserPrefData.files.defaultPreviewFile&&(localUserPrefData.files.defaultPreviewFile=this.options[this.selectedIndex].value)})}else if("snippets"===e);else if("preview"===e){currentPanel.el("#"+localUserPrefData.preview.refreshPreview).checked=!0,currentPanel.el("#thumbnailName").attr("value",localUserPrefData.preview.defaultThumbnailName);for(var s=currentPanel.el("#default-thumbnail-ext"),l=[],n=0,t=localUserPrefData.preview.thumbnailExtensions.length;t>n;n++){var o=localUserPrefData.preview.thumbnailExtensions,i=el("+option").attr("value",o[n]).text(o[n]);o[n]===localUserPrefData.preview.defaultThumbnailExt&&(i.selected=!0),l.push(i)}s.append(el(l)),currentPanel.el("#onSave").on("focus",function(){localUserPrefData.preview.refreshPreview!==this.id&&(localUserPrefData.preview.refreshPreview=this.id)}),currentPanel.el("#onCommand").on("focus",function(){localUserPrefData.preview.refreshPreview!==this.id&&(localUserPrefData.preview.refreshPreview=this.id)})}};

</script>

</body>

</html>