function checkAndRadio(){el(document.querySelectorAll("input[type=radio]"))}!function(){el=function(e,t){function n(e){var n=e.charAt(0);switch(n){case"#":return l.getById(e.slice(1));case"+":if(e.slice(1).match(/#/)){var a=e.slice(1).split("#"),r=l.create(a[0],t);return el.isElementArray(r)?r.each(function(e){e.setAttribute("id",a[1])}):r.setAttribute("id",a[1]),r}return l.create(e.slice(1),t);case".":return l.getByClassName(e.slice(1));default:return l.getByTagName(e)}}var l=this===window?window.el:this;return"string"==typeof e?n(e):el.isElement(e)?el.elify(e):el.isCollection(e)||el.isNodeList(e)||el.isElementArray(e)?el.elify(e):void 0},el.create=function(e,t){if(t&&"number"==typeof t){for(var n=[],l=0,a=t;a>l;l++)n.push(el.elify(document.createElement(e)));return n}return el.elify(document.createElement(e))},el.getById=function(e){if(this===window.el)return el.elify(document.getElementById(e));if(el.isElement(this)){if(document.contains(this))return el.elify(document.getElementById(e));var t=this,n=!1,l=null;return t.el("*").each(function(t){return t.getAttribute("id")===e?(n=!0,l=t,0):void 0}),l}},el.getByClassName=function(e,t){var n=this===window.el?document:this,l=n.getElementsByClassName(e);return l=Array.prototype.slice.call(l),el.elify(l)},el.getByTagName=function(e,t){var n=this===window.el?document:this,l=n.getElementsByTagName(e);return l=Array.prototype.slice.call(l),el.elify(l)},el.on=function(e,t){var n=el.isElement(this)||el.isElementArray(this)?this:window;return n.addEventListener(e,t),this},el.join=function(e){var t=[];if(el.isArray(e))for(var n=0,l=e.length;l>n;n++)el.isElement(e[n])?t.push(e[n]):el.isElementArray(e[n])&&e[n].each(function(e){t.push(e)});return el.elify(t)},el.elify=function(e){function t(e){return e.el=el,e.getById=el.getById,e.getByClassName=el.getByClassName,e.getByTagName=el.getByTagName,e.getByAttribute=el.getByAttribute,e.elify=el.elify,e.on=el.on,e.addClass=function(e){var t=this;if(el.isArray(e))for(var n=0,l=e.length;l>n;n++)t.classList.add(e[n]);else"string"==typeof e&&t.classList.add(e);return t},e.rmClass=function(e){var t=this;if(el.isArray(e))for(var n=0,l=e.length;l>n;n++)t.classList.remove(e[n]);else"string"==typeof e&&t.classList.remove(e);return t},e.hasClass=function(e){return this.classList.contains(e)},e.rm=function(){var e=this;return e.parentNode&&e.parentNode.removeChild(e),e},e.append=function(e){if(el.isElementArray(e)){var n=document.createDocumentFragment();e.each(function(e){e.el||(e=t(e)),n.appendChild(e)}),e=n}return this.appendChild(e),this},e.appendTo=function(e){var t=this;return el.isElementArray(e)?e.each(function(e){var n=t.cloneNode(!0);e.appendChild(n)}):e.appendChild(t),t},e.purge=function(){for(var e=this;e.firstChild;)e.removeChild(e.firstChild);return e},Object.defineProperty(e,"text",{configurable:!0,enumerable:!0,writable:!0,value:function(t){return"string"==typeof t&&e.appendChild(document.createTextNode(t)),e}}),e.attr=function(e,t){return"string"==typeof e&&this.setAttribute(e,void 0!==t?t:""),this},e}return el.isElement(e)?t(e):((el.isCollection(e)||el.isNodeList(e))&&(e=Array.prototype.slice.call(e)),e.each=function(e){for(var t=this,n=0,l=t.length;l>n;n++)if(0===e(t[n],n,t))return this===window.el?void 0:this;return this===window.el?void 0:this},e.each(function(e){t(e)}),e.addClass=function(n){return e.each(function(e){"undefined"!=typeof e&&(e.el||(e=t(e)),e.addClass(n))}),e},e.rmClass=function(n){return e.each(function(e){"undefined"!=typeof e&&(e.el||(e=t(e)),e.rmClass(n))}),e},e.hasClass=function(n,l){if("all"===l||"undefined"==typeof l){var a=!0;return e.each(function(e){"undefined"!=typeof e&&(void 0===e.el&&(e=t(e)),e.hasClass(n)||(a=!1))}),a}return"any"===l?(e.each(function(e){return"undefined"!=typeof e&&(e.el||(e=t(e)),e.hasClass(n))?!0:void 0}),!1):e},e.rm=function(n){return this.each(function(e){"undefined"!=typeof e&&(e.el||(e=t(e)),e.rm())}),e},e.append=function(n){if(el.isElementArray(n)){var l=document.createDocumentFragment();n.each(function(e){void 0===e.el&&(e=t(e)),l.appendChild(e)}),n=l}return e.each(function(e){"undefined"!=typeof e&&(e.el||(e=t(e)),e.append(n.cloneNode(!0)))}),e},e.appendTo=function(n,l){return e.each(function(e){"undefined"!=typeof e&&(void 0===e.el&&(e=t(e)),e.appendTo(n))}),l!==!1&&e.rm(),e},e.purge=function(){return e.each(function(e){"undefined"!=typeof e&&(e.el||(e=t(e)),e.purge())}),e},e.text=function(n){return e.each(function(e){"undefined"!=typeof e&&(e.el||(e=t(e)),e.text(n))}),e},e.attr=function(n,l){return e.each(function(e){"undefined"!=typeof e&&(e.el||(e=t(e)),e.attr(n,l))}),e},e.on=function(e,t){return this.each(function(n){n.addEventListener(e,t)}),this},e)},el.isArray=function(e){return Array.isArray(e)||e instanceof Array?!0:!1},el.isElementArray=function(e){return(Array.isArray(e)||e instanceof Array)&&el.isElement(e[0])?!0:!1},el.isElement=function(e){var t;try{t=e instanceof HTMLElement}catch(n){t=e&&e.nodeType?!0:!1}return t},el.isCollection=function(e){return e instanceof HTMLCollection},el.isNodeList=function(e){return e instanceof NodeList}}();var remote=require("remote"),app=remote.require("app"),Global=remote.getGlobal("sharedObject"),appRoot=Global.appRoot,fs=require("fs"),json=require("jsonfile"),escape=require("escape-html"),currentPanel={},localUserPrefData={},logo=el("#logo"),panel=el("#panel"),navOptions=el(".nav_option");fs.stat("/Users/samueleaton/",function(e,t){console.log("stats.isDirectory:",t.isDirectory())}),json.readFile(Global.appRoot+"/local/user-settings.json",function(e,t){e&&console.log("ERROR reading user-settings.json::",e),console.log("read file:",t),localUserPrefData=t,setTimeout(function(){panel.rmClass("hide"),logo.rmClass("hide"),el("#nav").rmClass("hide"),el("html")[0].rmClass("white"),el("body")[0].rmClass("white"),el("#bottom-bar").rmClass("hide")},200)}),el("#cancel").on("click",function(){Global.preferencesWindow.close()}),el("#save").on("click",function(e){console.log("saving prefs"),json.writeFile(Global.appRoot+"/local/user-settings.json",localUserPrefData,function(e){e?alert("Error Saving Changes"):Global.preferencesWindow.close()})}),el("#QTS-option").on("click",function(){panel.transitionTo("QTS"),navOptions.rmClass("current"),this.addClass("current")}),el("#files-option").on("click",function(){panel.transitionTo("files"),navOptions.rmClass("current"),this.addClass("current")}),el("#snippets-option").on("click",function(){panel.transitionTo("snippets"),navOptions.rmClass("current"),this.addClass("current")}),el("#preview-option").on("click",function(){panel.transitionTo("preview"),navOptions.rmClass("current"),this.addClass("current")}),el("#window-option").on("click",function(){panel.transitionTo("window"),navOptions.rmClass("current"),this.addClass("current")}),panel.transitionTo=function(e){panel.addClass("hide");var t=panel.buildPanel(e);panel.insertData(e),setTimeout(function(){panel.setPanel(t),panel.rmClass("hide")},300)},panel.buildPanel=function(e){return"QTS"===e?currentPanel=el("+form#qtsForm").addClass("QTS").append(el("+label").text("QTS Thing").append(el("+input"))):"files"===e?(currentPanel=el("+form#filesForm").addClass("files"),currentPanel.append(el("+label#path-to-brands-label").append(el.join([el("+div").text("Path To Brands"),el("+span#homeDirectory").text(process.env.HOME+"/ "),el("+input#path-to-brands")]))),currentPanel.append(el("+label").text("Default Preview File").append(el("+div").addClass("select_cont").append(el("+select#default-preview-file").attr("name","default-preview-file")))),currentPanel.append(el("+button").text("Manage Preview Files")),currentPanel):"snippets"===e?currentPanel=el("+form#snippetsForm").addClass("snippets").append(el("+label").text("Snippets Stuff").append(el("+input"))):"preview"===e?currentPanel=el("+form#previewForm").addClass("preview").append(el.join([el("+div").addClass("fieldSet").append(el.join([el("+h2").text("Refresh Preview Window"),el("+label").addClass(["radioLabel"]).text("On Save").append(el("+span").text(" (⌘S) ")).text(" and Command ").append(el.join([el("+span").text(" (⌘R) "),el("+input#onSave").attr("type","radio").attr("value",1).attr("name","refreshPreview")])),el("+label").addClass("radioLabel").text("On Command Only").append(el.join([el("+span").text(" (⌘R) "),el("+input#onCommand").attr("type","radio").attr("value",2).attr("name","refreshPreview")]))])),el("+div").addClass("fieldSet").append(el.join([el("+h2").text("Default Thumbnail Name"),el("+input#thumbnailName").addClass("thumbnailName").attr("name","thumbnailName"),el("+div").addClass(["select_cont","inline-block"]).append(el("+select#default-thumbnail-ext"))]))])):"window"===e?currentPanel=el("+form#windowForm").addClass("window").append(el("+label").text("Window Thing").append(el("+input"))):void 0},panel.setPanel=function(e){panel.purge().append(e),checkAndRadio()},panel.insertData=function(e){if("QTS"===e);else if("files"===e){for(var t=(currentPanel.el("#path-to-brands").attr("value",localUserPrefData.files.pathToBrands),currentPanel.el("#default-preview-file")),n=[],l=0,a=localUserPrefData.files.previewFiles.length;a>l;l++){var r=localUserPrefData.files.previewFiles,i=el("+option").attr("value",r[l].fileName).text(r[l].verboseName);r[l].fileName===localUserPrefData.files.defaultPreviewFile&&(i.selected=!0),n.push(i)}t.append(el(n)),currentPanel.el("#path-to-brands").on("blur",function(){this.value!==localUserPrefData.files.pathToBrands&&(localUserPrefData.files.pathToBrands=this.value)}),currentPanel.el("#default-preview-file").on("blur",function(){this.options[this.selectedIndex].value!==localUserPrefData.files.defaultPreviewFile&&(localUserPrefData.files.defaultPreviewFile=this.options[this.selectedIndex].value)})}else if("snippets"===e);else if("preview"===e){currentPanel.el("#"+localUserPrefData.preview.refreshPreview).checked=!0,currentPanel.el("#thumbnailName").attr("value",localUserPrefData.preview.defaultThumbnailName);for(var s=currentPanel.el("#default-thumbnail-ext"),n=[],l=0,a=localUserPrefData.preview.thumbnailExtensions.length;a>l;l++){var o=localUserPrefData.preview.thumbnailExtensions,i=el("+option").attr("value",o[l]).text(o[l]);o[l]===localUserPrefData.preview.defaultThumbnailExt&&(i.selected=!0),n.push(i)}s.append(el(n)),currentPanel.el("#onSave").on("focus",function(){localUserPrefData.preview.refreshPreview!==this.id&&(localUserPrefData.preview.refreshPreview=this.id)}),currentPanel.el("#onCommand").on("focus",function(){localUserPrefData.preview.refreshPreview!==this.id&&(localUserPrefData.preview.refreshPreview=this.id)})}};