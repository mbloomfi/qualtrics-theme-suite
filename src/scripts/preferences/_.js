function checkAndRadio(){el(document.querySelectorAll("input[type=radio]"))}var remote=require("remote"),app=remote.require("app"),Global=remote.getGlobal("sharedObject"),appRoot=Global.appRoot,fs=require("fs"),json=require("jsonfile"),escape=require("escape-html"),currentPanel={},localUserPrefData={},logo=el("#logo"),panel=el("#panel"),navOptions=el(".nav_option");fs.stat("/Users/samueleaton/",function(e,a){console.log("stats.isDirectory:",a.isDirectory())}),json.readFile(Global.appRoot+"/local/user-settings.json",function(e,a){e&&console.log("ERROR reading user-settings.json::",e),console.log("read file:",a),localUserPrefData=a,setTimeout(function(){panel.rmClass("hide"),logo.rmClass("hide"),el("#nav").rmClass("hide"),el("html")[0].rmClass("white"),el("body")[0].rmClass("white"),el("#bottom-bar").rmClass("hide")},200)}),el("#cancel").on("click",function(){Global.preferencesWindow.close()}),el("#save").on("click",function(e){console.log("saving prefs"),json.writeFile(Global.appRoot+"/local/user-settings.json",localUserPrefData,function(e){e?alert("Error Saving Changes"):Global.preferencesWindow.close()})}),el("#QTS-option").on("click",function(){panel.transitionTo("QTS"),navOptions.rmClass("current"),this.addClass("current")}),el("#files-option").on("click",function(){panel.transitionTo("files"),navOptions.rmClass("current"),this.addClass("current")}),el("#snippets-option").on("click",function(){panel.transitionTo("snippets"),navOptions.rmClass("current"),this.addClass("current")}),el("#preview-option").on("click",function(){panel.transitionTo("preview"),navOptions.rmClass("current"),this.addClass("current")}),el("#window-option").on("click",function(){panel.transitionTo("window"),navOptions.rmClass("current"),this.addClass("current")}),panel.transitionTo=function(e){panel.addClass("hide");var a=panel.buildPanel(e);panel.insertData(e),setTimeout(function(){panel.setPanel(a),panel.rmClass("hide")},300)},panel.buildPanel=function(e){return"QTS"===e?currentPanel=el("+form#qtsForm").addClass("QTS").append(el("+label").text("QTS Thing").append(el("+input"))):"files"===e?(currentPanel=el("+form#filesForm").addClass("files"),currentPanel.append(el("+label#path-to-brands-label").append(el.join([el("+div").text("Path To Brands"),el("+span#homeDirectory").text(process.env.HOME+"/ "),el("+input#path-to-brands")]))),currentPanel.append(el("+label").text("Default Preview File").append(el("+div").addClass("select_cont").append(el("+select#default-preview-file").attr("name","default-preview-file")))),currentPanel.append(el("+button").text("Manage Preview Files")),currentPanel):"snippets"===e?currentPanel=el("+form#snippetsForm").addClass("snippets").append(el("+label").text("Snippets Stuff").append(el("+input"))):"preview"===e?currentPanel=el("+form#previewForm").addClass("preview").append(el.join([el("+div").addClass("fieldSet").append(el.join([el("+h2").text("Refresh Preview Window"),el("+label").addClass(["radioLabel"]).text("On Save").append(el("+span").text(" (⌘S) ")).text(" and Command ").append(el.join([el("+span").text(" (⌘R) "),el("+input#onSave").attr("type","radio").attr("value",1).attr("name","refreshPreview")])),el("+label").addClass("radioLabel").text("On Command Only").append(el.join([el("+span").text(" (⌘R) "),el("+input#onCommand").attr("type","radio").attr("value",2).attr("name","refreshPreview")]))])),el("+div").addClass("fieldSet").append(el.join([el("+h2").text("Default Thumbnail Name"),el("+input#thumbnailName").addClass("thumbnailName").attr("name","thumbnailName"),el("+div").addClass(["select_cont","inline-block"]).append(el("+select#default-thumbnail-ext"))]))])):"window"===e?currentPanel=el("+form#windowForm").addClass("window").append(el("+label").text("Window Thing").append(el("+input"))):void 0},panel.setPanel=function(e){panel.purge().append(e),checkAndRadio()},panel.insertData=function(e){if("QTS"===e);else if("files"===e){for(var a=(currentPanel.el("#path-to-brands").attr("value",localUserPrefData.files.pathToBrands),currentPanel.el("#default-preview-file")),l=[],n=0,t=localUserPrefData.files.previewFiles.length;t>n;n++){var r=localUserPrefData.files.previewFiles,i=el("+option").attr("value",r[n].fileName).text(r[n].verboseName);r[n].fileName===localUserPrefData.files.defaultPreviewFile&&(i.selected=!0),l.push(i)}a.append(el(l)),currentPanel.el("#path-to-brands").on("blur",function(){this.value!==localUserPrefData.files.pathToBrands&&(localUserPrefData.files.pathToBrands=this.value)}),currentPanel.el("#default-preview-file").on("blur",function(){this.options[this.selectedIndex].value!==localUserPrefData.files.defaultPreviewFile&&(localUserPrefData.files.defaultPreviewFile=this.options[this.selectedIndex].value)})}else if("snippets"===e);else if("preview"===e){currentPanel.el("#"+localUserPrefData.preview.refreshPreview).checked=!0,currentPanel.el("#thumbnailName").attr("value",localUserPrefData.preview.defaultThumbnailName);for(var s=currentPanel.el("#default-thumbnail-ext"),l=[],n=0,t=localUserPrefData.preview.thumbnailExtensions.length;t>n;n++){var o=localUserPrefData.preview.thumbnailExtensions,i=el("+option").attr("value",o[n]).text(o[n]);o[n]===localUserPrefData.preview.defaultThumbnailExt&&(i.selected=!0),l.push(i)}s.append(el(l)),currentPanel.el("#onSave").on("focus",function(){localUserPrefData.preview.refreshPreview!==this.id&&(localUserPrefData.preview.refreshPreview=this.id)}),currentPanel.el("#onCommand").on("focus",function(){localUserPrefData.preview.refreshPreview!==this.id&&(localUserPrefData.preview.refreshPreview=this.id)})}};